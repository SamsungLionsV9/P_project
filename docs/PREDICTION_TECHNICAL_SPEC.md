# ğŸš— Car-Sentix ê°€ê²© ì˜ˆì¸¡ ê¸°ìˆ  ë¬¸ì„œ

## ğŸ“‹ ëª©ì°¨
1. [ì‹œìŠ¤í…œ ê°œìš”](#1-ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì˜ˆì¸¡ íŒŒì´í”„ë¼ì¸](#2-ì˜ˆì¸¡-íŒŒì´í”„ë¼ì¸)
3. [ML ëª¨ë¸ ìƒì„¸](#3-ml-ëª¨ë¸-ìƒì„¸)
4. [í”¼ì²˜ ì—”ì§€ë‹ˆì–´ë§](#4-í”¼ì²˜-ì—”ì§€ë‹ˆì–´ë§)
5. [ì‹ ë¢°ë„ ê³„ì‚°](#5-ì‹ ë¢°ë„-ê³„ì‚°)
6. [íƒ€ì´ë° ë¶„ì„](#6-íƒ€ì´ë°-ë¶„ì„)
7. [AI ë¶„ì„ (Groq)](#7-ai-ë¶„ì„-groq)
8. [API ëª…ì„¸](#8-api-ëª…ì„¸)

---

## 1. ì‹œìŠ¤í…œ ê°œìš”

### 1.1 ì•„í‚¤í…ì²˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Flutter App   â”‚â”€â”€â”€â”€â–¶â”‚  FastAPI Server  â”‚â”€â”€â”€â”€â–¶â”‚   ML Models     â”‚
â”‚   (í”„ë¡ íŠ¸ì—”ë“œ)    â”‚     â”‚   (run_server.py) â”‚     â”‚   (.pkl íŒŒì¼)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Groq AI (LLM)   â”‚
                        â”‚  íƒ€ì´ë° ë¶„ì„       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ì£¼ìš” ì„œë¹„ìŠ¤ ì»´í¬ë„ŒíŠ¸
| ì„œë¹„ìŠ¤ | íŒŒì¼ | ì—­í•  |
|--------|------|------|
| **PredictionServiceV12** | `prediction_v12.py` | ê°€ê²© ì˜ˆì¸¡ í•µì‹¬ ë¡œì§ |
| **TimingService** | `timing.py` | êµ¬ë§¤ íƒ€ì´ë° ë¶„ì„ |
| **GroqService** | `groq_service.py` | AI ê¸°ë°˜ ì‹¬ì¸µ ë¶„ì„ |
| **RecommendationService** | `recommendation_service.py` | ì°¨ëŸ‰ ì¶”ì²œ |
| **DatabaseService** | `database_service.py` | ì˜êµ¬ ë°ì´í„° ì €ì¥ |

---

## 2. ì˜ˆì¸¡ íŒŒì´í”„ë¼ì¸

### 2.1 ì „ì²´ í”Œë¡œìš°
```
ì‚¬ìš©ì ì…ë ¥
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ë¸Œëœë“œ ë¶„ë¥˜ (êµ­ì‚°ì°¨ vs ì™¸ì œì°¨)                               â”‚
â”‚    - DOMESTIC_BRANDS: í˜„ëŒ€, ê¸°ì•„, ì œë„¤ì‹œìŠ¤, ì‰ë³´ë ˆ, ë¥´ë…¸ì½”ë¦¬ì•„...   â”‚
â”‚    - IMPORTED_BRANDS: ë²¤ì¸ , BMW, ì•„ìš°ë””, í¬ë¥´ì‰, í…ŒìŠ¬ë¼...       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. í”¼ì²˜ ìƒì„±                                                  â”‚
â”‚    - ëª¨ë¸ ì¸ì½”ë”© (Target Encoding)                            â”‚
â”‚    - ì£¼í–‰ê±°ë¦¬ ê·¸ë£¹í™” (A~E)                                     â”‚
â”‚    - ì—°ë£Œ íƒ€ì… ì •ê·œí™”                                          â”‚
â”‚    - ì˜µì…˜ í”„ë¦¬ë¯¸ì—„ ê³„ì‚°                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ëª¨ë¸ ì˜ˆì¸¡                                                  â”‚
â”‚    - XGBoost ëª¨ë¸ ì‚¬ìš©                                        â”‚
â”‚    - ë¡œê·¸ ë³€í™˜ëœ ê°€ê²© ì˜ˆì¸¡ í›„ ì—­ë³€í™˜                              â”‚
â”‚    - ì—°ë£Œë³„ ê°€ê²© ì¡°ì • ì ìš©                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. í›„ì²˜ë¦¬                                                    â”‚
â”‚    - ì˜µì…˜ í”„ë¦¬ë¯¸ì—„ ì¶”ê°€                                        â”‚
â”‚    - ì‹ ë¢°ë„ ê³„ì‚°                                              â”‚
â”‚    - ê°€ê²© ë²”ìœ„ ì‚°ì¶œ                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
ì˜ˆì¸¡ ê²°ê³¼ ë°˜í™˜
```

### 2.2 ì˜ˆì¸¡ ìš”ì²­ ì˜ˆì‹œ
```json
// POST /api/smart-analysis
{
    "brand": "í˜„ëŒ€",
    "model": "ê·¸ëœì €",
    "year": 2022,
    "mileage": 30000,
    "fuel": "ê°€ì†”ë¦°",
    "has_sunroof": true,
    "has_leather_seat": true,
    "has_navigation": true,
    "is_accident_free": true,
    "inspection_grade": "good"
}
```

### 2.3 ì˜ˆì¸¡ ì‘ë‹µ ì˜ˆì‹œ
```json
{
    "prediction": {
        "predicted_price": 3250,
        "price_range": [2925, 3575],
        "confidence": 85.6
    },
    "timing": {
        "timing_score": 72.5,
        "decision": "êµ¬ë§¤",
        "color": "ğŸŸ¢"
    },
    "groq_analysis": {
        "signal": {...},
        "negotiation": {...}
    }
}
```

---

## 3. ML ëª¨ë¸ ìƒì„¸

### 3.1 ëª¨ë¸ ë²„ì „
| ëª¨ë¸ | íŒŒì¼ëª… | ëŒ€ìƒ | MAPE |
|------|--------|------|------|
| **êµ­ì‚°ì°¨ V12** | `domestic_v12.pkl` | í˜„ëŒ€, ê¸°ì•„ ë“± | 9.7% |
| **êµ­ì‚°ì°¨ V11** (fallback) | `domestic_v11.pkl` | í˜„ëŒ€, ê¸°ì•„ ë“± | 10.0% |
| **ì™¸ì œì°¨ V14** | `imported_v14.pkl` | ë²¤ì¸ , BMW ë“± | 12.0% |
| **ì™¸ì œì°¨ V13** (fallback) | `imported_v13.pkl` | ë²¤ì¸ , BMW ë“± | 12.5% |

### 3.2 ëª¨ë¸ ë¡œë”© ë¡œì§
```python
def _load_models(self):
    """ëª¨ë¸ ë¡œë“œ (V12/V14 ìš°ì„ , ì—†ìœ¼ë©´ V11/V13 fallback)"""
    
    # êµ­ì‚°ì°¨: V12 â†’ V11
    domestic_path = os.path.join(MODEL_DIR, 'domestic_v12.pkl')
    if os.path.exists(domestic_path):
        self.domestic_model = joblib.load(domestic_path)
        self.domestic_version = 'V12'
    else:
        # Fallback to V11
        self.domestic_model = joblib.load('domestic_v11.pkl')
        self.domestic_version = 'V11'
    
    # ì™¸ì œì°¨: V14 â†’ V13
    imported_path = os.path.join(MODEL_DIR, 'imported_v14.pkl')
    if os.path.exists(imported_path):
        self.imported_model = joblib.load(imported_path)
        self.imported_version = 'V14'
    else:
        self.imported_model = joblib.load('imported_v13.pkl')
        self.imported_version = 'V13'
```

### 3.3 ì•Œê³ ë¦¬ì¦˜
- **ì•Œê³ ë¦¬ì¦˜**: XGBoost (Gradient Boosting)
- **íƒ€ê²Ÿ ë³€í™˜**: `log1p(price)` â†’ ë¡œê·¸ ë³€í™˜ìœ¼ë¡œ ê°€ê²© ë¶„í¬ ì •ê·œí™”
- **ì—­ë³€í™˜**: `expm1(prediction)` â†’ ì‹¤ì œ ê°€ê²©ìœ¼ë¡œ ë³µì›

---

## 4. í”¼ì²˜ ì—”ì§€ë‹ˆì–´ë§

### 4.1 êµ­ì‚°ì°¨ í”¼ì²˜ (V12)
```python
# ì´ 24ê°œ í”¼ì²˜
{
    # ì¸ì½”ë”© í”¼ì²˜ (Target Encoding)
    'Model_enc': float,        # ëª¨ë¸ë³„ í‰ê·  ê°€ê²©
    'Model_Year_enc': float,   # ëª¨ë¸+ì—°ì‹ í‰ê·  ê°€ê²©
    'Model_Year_MG_enc': float, # ëª¨ë¸+ì—°ì‹+ì£¼í–‰ê±°ë¦¬ê·¸ë£¹ í‰ê·  ê°€ê²©
    'Brand_enc': float,        # ë¸Œëœë“œë³„ í‰ê·  ê°€ê²©
    'Fuel_enc': float,         # ì—°ë£Œë³„ í‰ê·  ê°€ê²©
    
    # ì—°ë£Œ ì›í•« ì¸ì½”ë”©
    'is_diesel': 0|1,
    'is_hybrid': 0|1,
    'is_lpg': 0|1,
    
    # ì°¨ëŸ‰ ì •ë³´
    'Age': int,                # ì°¨ë ¹ (2025 - ì—°ì‹)
    'Age_log': float,          # log1p(Age)
    'Age_sq': float,           # AgeÂ²
    'Mileage': int,            # ì£¼í–‰ê±°ë¦¬
    'Mile_log': float,         # log1p(Mileage)
    'Km_per_Year': float,      # ì—°ê°„ ì£¼í–‰ê±°ë¦¬
    
    # ìƒíƒœ ì •ë³´
    'is_accident_free': 0|1,   # ë¬´ì‚¬ê³  ì—¬ë¶€
    'inspection_grade_enc': 0|1|2,  # ì„±ëŠ¥ì ê²€ ë“±ê¸‰
    
    # ì˜µì…˜ ì§‘ê³„
    'Opt_Count': int,          # ì˜µì…˜ ê°œìˆ˜
    'Opt_Premium': float,      # ì˜µì…˜ í”„ë¦¬ë¯¸ì—„ ì ìˆ˜
    
    # ê°œë³„ ì˜µì…˜
    'has_sunroof': 0|1,
    'has_leather_seat': 0|1,
    'has_led_lamp': 0|1,
    'has_smart_key': 0|1,
    'has_navigation': 0|1,
    'has_heated_seat': 0|1,
    'has_ventilated_seat': 0|1,
    'has_rear_camera': 0|1
}
```

### 4.2 ì™¸ì œì°¨ í”¼ì²˜ (V14)
```python
# ì¶”ê°€ í”¼ì²˜
{
    'Class_enc': float,        # ì°¨ëŸ‰ ë“±ê¸‰ ì¸ì½”ë”© (E-í´ë˜ìŠ¤, 5ì‹œë¦¬ì¦ˆ ë“±)
    'Class_Year_enc': float,   # ë“±ê¸‰+ì—°ì‹ ì¸ì½”ë”©
    'Brand_Tier': 1~5,         # ë¸Œëœë“œ í‹°ì–´ (í¬ë¥´ì‰ 5, ë²¤ì¸ /BMW 4...)
    'Class_Rank': 1~5,         # í´ë˜ìŠ¤ ìˆœìœ„ (S-í´ë˜ìŠ¤ 4, E-í´ë˜ìŠ¤ 3...)
}
```

### 4.3 ì£¼í–‰ê±°ë¦¬ ê·¸ë£¹í™”
```python
def _get_mileage_group(self, mileage: int) -> str:
    if mileage < 30000:   return 'A'  # ì €ì£¼í–‰
    elif mileage < 60000: return 'B'  # ì ì •
    elif mileage < 100000: return 'C' # ë³´í†µ
    elif mileage < 150000: return 'D' # ê³ ì£¼í–‰
    return 'E'                        # ì´ˆê³ ì£¼í–‰
```

### 4.4 ì—°ë£Œ íƒ€ì… ì •ê·œí™”
```python
def _normalize_fuel(self, fuel: str) -> str:
    fuel = str(fuel).lower()
    if 'í•˜ì´ë¸Œë¦¬ë“œ' in fuel or 'ì „ê¸°' in fuel:
        return 'í•˜ì´ë¸Œë¦¬ë“œ'
    elif 'lpg' in fuel:
        return 'LPG'
    elif 'ë””ì ¤' in fuel:
        return 'ë””ì ¤'
    return 'ê°€ì†”ë¦°'
```

### 4.5 ì—°ë£Œë³„ ê°€ê²© ì¡°ì • ê³„ìˆ˜
```python
# êµ­ì‚°ì°¨
FUEL_ADJUSTMENT = {
    'ê°€ì†”ë¦°': 1.0,        # ê¸°ì¤€
    'ë””ì ¤': 1.02,         # +2%
    'í•˜ì´ë¸Œë¦¬ë“œ': 1.05,   # +5%
    'LPG': 0.94,          # -6%
}

# ì™¸ì œì°¨
IMPORTED_FUEL_ADJ = {
    'ê°€ì†”ë¦°': 1.0,
    'ë””ì ¤': 1.05,         # +5%
    'í•˜ì´ë¸Œë¦¬ë“œ': 1.10,   # +10%
}
```

### 4.6 ì˜µì…˜ í”„ë¦¬ë¯¸ì—„ (ë§Œì›)
```python
# êµ­ì‚°ì°¨ ì˜µì…˜ í”„ë¦¬ë¯¸ì—„
DOMESTIC_OPT_PREMIUM = {
    'has_ventilated_seat': 70,  # í†µí’ì‹œíŠ¸
    'has_sunroof': 60,          # ì„ ë£¨í”„
    'has_leather_seat': 50,     # ê°€ì£½ì‹œíŠ¸
    'has_navigation': 30,       # ë‚´ë¹„ê²Œì´ì…˜
    'has_led_lamp': 30,         # LEDë¨í”„
    'has_heated_seat': 30,      # ì—´ì„ ì‹œíŠ¸
    'has_smart_key': 20,        # ìŠ¤ë§ˆíŠ¸í‚¤
    'has_rear_camera': 20,      # í›„ë°©ì¹´ë©”ë¼
}

# ì™¸ì œì°¨ ì˜µì…˜ í”„ë¦¬ë¯¸ì—„ (ë” ë†’ìŒ)
IMPORTED_OPT_PREMIUM = {
    'has_ventilated_seat': 120,
    'has_sunroof': 100,
    'has_led_lamp': 100,
    'has_leather_seat': 80,
    'has_navigation': 80,
    'has_heated_seat': 60,
    'has_smart_key': 50,
    'has_rear_camera': 50,
}
```

---

## 5. ì‹ ë¢°ë„ ê³„ì‚°

### 5.1 ê¸°ë³¸ ì‹ ë¢°ë„ ê³µì‹
```python
# MAPE ê¸°ë°˜ ì‹ ë¢°ë„ ê³„ì‚°
# MAPE 5% â†’ 95%, MAPE 10% â†’ 85%, MAPE 15% â†’ 75%
confidence = max(50, min(98, 95 - (mape - 5) * 2))
```

| MAPE | ì‹ ë¢°ë„ |
|------|--------|
| 5% ì´í•˜ | 95%+ |
| 10% | 85% |
| 12% | 81% |
| 15% | 75% |
| 20% | 65% |

### 5.2 ë¶ˆí™•ì‹¤ì„± ìš”ì†Œ
```python
# ì˜µì…˜ì— ë”°ë¥¸ ë¶ˆí™•ì‹¤ì„±
opt_count = sum(1 for v in options.values() if v)
opt_uncertainty = opt_count * 0.5  # ì˜µì…˜ë‹¹ 0.5%

# ì—°ë£Œì— ë”°ë¥¸ ë¶ˆí™•ì‹¤ì„±
fuel_uncertainty = {
    'í•˜ì´ë¸Œë¦¬ë“œ': 1.5,
    'LPG': 2.0,
    'ë””ì ¤': 0.5,
    'ê°€ì†”ë¦°': 0
}

# ì´ MAPE
total_mape = mape + opt_uncertainty + fuel_uncertainty
```

### 5.3 ê°€ê²© ë²”ìœ„ ê³„ì‚°
```python
# ì˜ˆì¸¡ ì˜¤ì°¨ ë²”ìœ„
error_margin = predicted_price * (total_mape / 100)
price_range = (
    predicted_price - error_margin,  # ìµœì €
    predicted_price + error_margin   # ìµœê³ 
)
```

---

## 6. íƒ€ì´ë° ë¶„ì„

### 6.1 ë¶„ì„ ìš”ì†Œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              íƒ€ì´ë° ì ìˆ˜ (0~100)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ê±°ì‹œê²½ì œ (33%)  â”‚  íŠ¸ë Œë“œ (33%)  â”‚  ì‹ ì°¨ì¼ì • (33%)  â”‚
â”‚  - ê¸ˆë¦¬          â”‚  - ê²€ìƒ‰ëŸ‰      â”‚  - ì‹ ì°¨ ì¶œì‹œ     â”‚
â”‚  - ìœ ê°€          â”‚  - ê´€ì‹¬ë„ ì¶”ì´  â”‚  - í˜ì´ìŠ¤ë¦¬í”„íŠ¸  â”‚
â”‚  - ê²½ê¸° ì§€ìˆ˜     â”‚                â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ì˜ì‚¬ê²°ì • ê¸°ì¤€
| ì ìˆ˜ | ê²°ì • | ìƒ‰ìƒ | ê¶Œì¥ í–‰ë™ |
|------|------|------|----------|
| 80+ | **êµ¬ë§¤** | ğŸŸ¢ | ì ê·¹ êµ¬ë§¤ ê¶Œì¥ |
| 70-79 | êµ¬ë§¤ | ğŸŸ¢ | ë§ˆìŒì— ë“œëŠ” ë§¤ë¬¼ì´ë©´ êµ¬ë§¤ |
| 60-69 | **ê´€ë§** | ğŸŸ¡ | ê¸‰í•˜ì§€ ì•Šë‹¤ë©´ ëŒ€ê¸° |
| 50-59 | ê´€ë§ | ğŸŸ¡ | 1-2ì£¼ í›„ ì¬í‰ê°€ |
| 50 ë¯¸ë§Œ | **ëŒ€ê¸°** | ğŸ”´ | 1-2ê°œì›” í›„ ì¬í‰ê°€ |

### 6.3 íƒ€ì´ë° ì‘ë‹µ ì˜ˆì‹œ
```json
{
    "timing_score": 72.5,
    "decision": "êµ¬ë§¤",
    "color": "ğŸŸ¢",
    "breakdown": {
        "macro": 68.0,    // ê±°ì‹œê²½ì œ
        "trend": 75.0,    // íŠ¸ë Œë“œ
        "schedule": 74.5  // ì‹ ì°¨ì¼ì •
    },
    "reasons": [
        "âœ… ê¸ˆë¦¬ ì•ˆì •ì„¸ (3.25%)",
        "âœ… ê²€ìƒ‰ëŸ‰ ì¦ê°€ ì¶”ì„¸",
        "âš ï¸ ì‹ ì°¨ ì¶œì‹œ 2ê°œì›” í›„ ì˜ˆì •"
    ],
    "action": "êµ¬ë§¤ ê³ ë ¤ ì í•©",
    "confidence": "high",
    "data_available": true
}
```

---

## 7. AI ë¶„ì„ (Groq)

### 7.1 Groq ì„œë¹„ìŠ¤ ê°œìš”
- **ëª¨ë¸**: Llama 3.3 70B
- **ìš©ë„**: ì‹¬ì¸µ ë¶„ì„, ë„¤ê³  ëŒ€ë³¸ ìƒì„±, í—ˆìœ„ë§¤ë¬¼ íƒì§€

### 7.2 ë§¤ìˆ˜/ê´€ë§ ì‹ í˜¸ ë¶„ì„
```python
def generate_signal_report(vehicle_data, prediction_data, timing_data):
    """
    ì‹ í˜¸ ê²°ì • ë¡œì§:
    - ì˜ˆì¸¡ê°€ ëŒ€ë¹„ ì €í‰ê°€ + ì¢‹ì€ íƒ€ì´ë° â†’ ğŸŸ¢ ë§¤ìˆ˜
    - ê³ í‰ê°€ ë˜ëŠ” ë‚˜ìœ íƒ€ì´ë° â†’ ğŸ”´ íšŒí”¼
    - ê·¸ ì™¸ â†’ ğŸŸ¡ ê´€ë§
    """
    
    price_diff_pct = (sale_price - predicted_price) / predicted_price * 100
    
    if price_diff_pct <= -5 and timing_score >= 65:
        signal = 'buy'     # ì €í‰ê°€ + ì¢‹ì€ íƒ€ì´ë°
    elif price_diff_pct >= 5 or timing_score < 55:
        signal = 'avoid'   # ê³ í‰ê°€ ë˜ëŠ” ë‚˜ìœ íƒ€ì´ë°
    else:
        signal = 'hold'    # ê´€ë§
```

### 7.3 ë„¤ê³  ëŒ€ë³¸ ìƒì„±
```python
def generate_negotiation_script(vehicle_data, prediction_data, issues):
    """
    ìƒí™©ë³„ ëª©í‘œê°€ ê²°ì •:
    - ë§¤ìš° ì €ë ´ (ì˜ˆì¸¡ê°€ ëŒ€ë¹„ -10% ì´í•˜): í˜„ì¬ê°€ ìœ ì§€
    - ì €ë ´ (-3% ~ -10%): 3% ì¶”ê°€ í• ì¸ ì‹œë„
    - ì ì • (-3% ~ +3%): ì‹œì„¸ ì–¸ê¸‰í•˜ë©° 2% í• ì¸
    - ë¹„ìŒˆ (+3% ~ +10%): ì˜ˆì¸¡ê°€ë¡œ ì œì•ˆ
    - ë§¤ìš° ë¹„ìŒˆ (+10% ì´ìƒ): ì˜ˆì¸¡ê°€ì˜ 95%ë¡œ ì œì•ˆ
    """
```

### 7.4 í—ˆìœ„ë§¤ë¬¼ íƒì§€
```python
def detect_fraud(dealer_description, performance_record):
    """
    ì˜ì‹¬ í‚¤ì›Œë“œ:
    - 'ë¯¸ì„¸', 'ë‹¨ìˆœ', 'ì‚´ì§', 'ì¡°ê¸ˆ'
    - 'ì™„ë²½', 'ìµœìƒ', 'ìƒˆì°¨ê¸‰'
    - 'ë¬´ì‚¬ê³ ' (ì„±ëŠ¥ê¸°ë¡ë¶€ì™€ ë¶ˆì¼ì¹˜ ì‹œ)
    """
```

---

## 8. API ëª…ì„¸

### 8.1 ê°€ê²© ì˜ˆì¸¡
```
POST /api/predict
POST /api/smart-analysis (ê¶Œì¥ - íƒ€ì´ë°+AI í¬í•¨)
```

### 8.2 ì¶”ì²œ/ê²€ìƒ‰
```
GET /api/popular?category={all|domestic|imported}&limit=5
GET /api/recommendations?budget_min=2000&budget_max=4000
GET /api/good-deals?category=domestic&limit=10
GET /api/model-deals?brand=í˜„ëŒ€&model=ê·¸ëœì €
```

### 8.3 ì‚¬ìš©ì ê¸°ëŠ¥
```
GET /api/history?user_id=xxx
GET /api/favorites?user_id=xxx
POST /api/favorites
DELETE /api/favorites/{id}
```

### 8.4 ê´€ë¦¬ì
```
GET /api/admin/dashboard-stats
GET /api/admin/daily-requests?days=7
GET /api/admin/vehicles?category=domestic&limit=50
GET /api/admin/history
GET /api/admin/ai-logs
```

---

## ğŸ“Š ì„±ëŠ¥ ì§€í‘œ

| ì§€í‘œ | êµ­ì‚°ì°¨ (V12) | ì™¸ì œì°¨ (V14) |
|------|-------------|-------------|
| **MAPE** | 9.7% | 12.0% |
| **ì‹ ë¢°ë„** | 85.6% | 81.0% |
| **RÂ²** | 0.89 | 0.85 |

---

## ğŸ”„ ë²„ì „ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ì‚¬í•­ |
|------|------|----------|
| V12 | 2024-11 | FuelType í”¼ì²˜ ì¶”ê°€, MAPE ê°œì„  |
| V11 | 2024-10 | ì˜µì…˜ í”„ë¦¬ë¯¸ì—„ ê³ ë„í™” |
| V10 | 2024-09 | Target Encoding ì ìš© |

---

*ë¬¸ì„œ ì‘ì„±ì¼: 2024ë…„ 11ì›”*
*ì‘ì„±: Car-Sentix ê°œë°œíŒ€*

