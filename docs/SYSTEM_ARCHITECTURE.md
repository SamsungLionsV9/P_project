# ğŸ—ï¸ Car-Sentix ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ìƒì„¸

> **ìµœì¢… ì—…ë°ì´íŠ¸**: 2024ë…„ 12ì›” 4ì¼  
> **ì‘ì„± ì›ì¹™**: ì‹¤ì œ ì½”ë“œ ê¸°ë°˜ ì‚¬ì‹¤ë§Œ ê¸°ë¡

---

## 1. ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì„±ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           [Client Layer]                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   ğŸ“± Flutter App       â”‚      â”‚   ğŸ–¥ï¸ Admin Dashboard   â”‚             â”‚
â”‚  â”‚   Port: 3000 (Web)     â”‚      â”‚   Port: 3001           â”‚             â”‚
â”‚  â”‚   - ì¼ë°˜ ì‚¬ìš©ììš©      â”‚      â”‚   - ê´€ë¦¬ì/B2Bìš©       â”‚             â”‚
â”‚  â”‚   - ê°€ê²© ì˜ˆì¸¡ UI       â”‚      â”‚   - React + Vite       â”‚             â”‚
â”‚  â”‚   - íƒ€ì´ë° ë¶„ì„ UI     â”‚      â”‚   - Recharts ì°¨íŠ¸      â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚              â”‚                               â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                               â”‚
               â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           [API Layer]                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                    ğŸŸ¢ ML Service (FastAPI)                      â”‚     â”‚
â”‚  â”‚                         Port: 8000                              â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚                                                                 â”‚     â”‚
â”‚  â”‚  [Core Services]                                                â”‚     â”‚
â”‚  â”‚  â”œâ”€â”€ prediction_v12.py      # ê°€ê²© ì˜ˆì¸¡ (êµ­ì‚°/ìˆ˜ì…)            â”‚     â”‚
â”‚  â”‚  â”œâ”€â”€ timing.py              # íƒ€ì´ë° ë¶„ì„                       â”‚     â”‚
â”‚  â”‚  â”œâ”€â”€ enhanced_timing.py     # Phase 3 ê³ ë„í™” íƒ€ì´ë°             â”‚     â”‚
â”‚  â”‚  â”œâ”€â”€ b2b_intelligence.py    # B2B ì‹œì¥ ì¸í…”ë¦¬ì „ìŠ¤              â”‚     â”‚
â”‚  â”‚  â”œâ”€â”€ groq_service.py        # Groq AI ë¶„ì„                      â”‚     â”‚
â”‚  â”‚  â””â”€â”€ recommendation_service.py  # ì¶”ì²œ ì„œë¹„ìŠ¤                   â”‚     â”‚
â”‚  â”‚                                                                 â”‚     â”‚
â”‚  â”‚  [Support Services]                                             â”‚     â”‚
â”‚  â”‚  â”œâ”€â”€ similar_service.py     # ìœ ì‚¬ ì°¨ëŸ‰ ê²€ìƒ‰                    â”‚     â”‚
â”‚  â”‚  â”œâ”€â”€ database_service.py    # SQLite ì˜êµ¬ ì €ì¥ì†Œ                â”‚     â”‚
â”‚  â”‚  â”œâ”€â”€ history_service.py     # ë¶„ì„ ì´ë ¥ ê´€ë¦¬                    â”‚     â”‚
â”‚  â”‚  â””â”€â”€ admin_service.py       # ëŒ€ì‹œë³´ë“œ í†µê³„                     â”‚     â”‚
â”‚  â”‚                                                                 â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                    ğŸ”µ User Service (Spring Boot)                â”‚     â”‚
â”‚  â”‚                         Port: 8080                              â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚  â”œâ”€â”€ AuthController         # ì¸ì¦ (ë¡œê·¸ì¸/íšŒì›ê°€ì…)           â”‚     â”‚
â”‚  â”‚  â”œâ”€â”€ UserController         # ì‚¬ìš©ì ì •ë³´ ê´€ë¦¬                  â”‚     â”‚
â”‚  â”‚  â”œâ”€â”€ FavoriteController     # ì¦ê²¨ì°¾ê¸°                          â”‚     â”‚
â”‚  â”‚  â”œâ”€â”€ OAuth2LoginHandler     # ì†Œì…œ ë¡œê·¸ì¸ (ë„¤ì´ë²„/ì¹´ì¹´ì˜¤/êµ¬ê¸€) â”‚     â”‚
â”‚  â”‚  â””â”€â”€ JwtAuthFilter          # JWT ì¸ì¦ í•„í„°                     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                               â”‚
               â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           [Data Layer]                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ“Š ML Models       â”‚  â”‚  ğŸ—„ï¸ SQLite DB       â”‚  â”‚  ğŸ“ CSV Data    â”‚ â”‚
â”‚  â”‚  (XGBoost .pkl)     â”‚  â”‚  (carsentix.db)     â”‚  â”‚                 â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ domestic_v12_*.pkl  â”‚  â”‚ analyses (ë¶„ì„ì´ë ¥) â”‚  â”‚ encar_*.csv     â”‚ â”‚
â”‚  â”‚ imported_v14_*.pkl  â”‚  â”‚ notifications       â”‚  â”‚ new_car.csv     â”‚ â”‚
â”‚  â”‚ encoders, features  â”‚  â”‚ search_history      â”‚  â”‚                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        [External Data Sources]                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚Yahoo Financeâ”‚  â”‚ë„¤ì´ë²„ DataLabâ”‚ â”‚  í•œêµ­ì€í–‰   â”‚  â”‚  Groq AI    â”‚    â”‚
â”‚  â”‚ (yfinance)  â”‚  â”‚   API       â”‚  â”‚  BOK API   â”‚  â”‚   Cloud     â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ â€¢ ìœ ê°€(WTI) â”‚  â”‚ â€¢ ê²€ìƒ‰íŠ¸ë Œë“œâ”‚  â”‚ â€¢ ê¸°ì¤€ê¸ˆë¦¬ â”‚  â”‚ â€¢ LLM ë¶„ì„  â”‚    â”‚
â”‚  â”‚ â€¢ í™˜ìœ¨(KRW) â”‚  â”‚ â€¢ ê´€ì‹¬ë„   â”‚  â”‚ â€¢ ê¸ˆí†µìœ„   â”‚  â”‚ â€¢ ë„¤ê³ ëŒ€ë³¸  â”‚    â”‚
â”‚  â”‚ â€¢ 60ì¼ íˆìŠ¤í† ë¦¬â”‚            â”‚  â”‚   ì¼ì •     â”‚  â”‚ â€¢ í—ˆìœ„íƒì§€  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ML Service ìƒì„¸ êµ¬ì¡°

### 2.1 íŒŒì¼ êµ¬ì¡° (ì‹¤ì œ)

```
ml-service/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ prediction_v12.py          # ê°€ê²© ì˜ˆì¸¡ ì„œë¹„ìŠ¤ (ë©”ì¸)
â”‚   â”‚   â””â”€â”€ PredictionServiceV12
â”‚   â”‚       â”œâ”€â”€ predict()          # í†µí•© ì˜ˆì¸¡
â”‚   â”‚       â”œâ”€â”€ _predict_domestic()# êµ­ì‚°ì°¨ ì˜ˆì¸¡
â”‚   â”‚       â””â”€â”€ _predict_imported()# ìˆ˜ì…ì°¨ ì˜ˆì¸¡
â”‚   â”‚
â”‚   â”œâ”€â”€ timing.py                  # íƒ€ì´ë° ë¶„ì„ ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ TimingService
â”‚   â”‚       â”œâ”€â”€ analyze_timing()   # í†µí•© ë¶„ì„
â”‚   â”‚       â”œâ”€â”€ _analyze_macro()   # ê±°ì‹œê²½ì œ ë¶„ì„
â”‚   â”‚       â”œâ”€â”€ _analyze_trend()   # ê²€ìƒ‰íŠ¸ë Œë“œ ë¶„ì„
â”‚   â”‚       â””â”€â”€ _analyze_schedule()# ì‹ ì°¨ì¼ì • ë¶„ì„
â”‚   â”‚
â”‚   â”œâ”€â”€ enhanced_timing.py         # Phase 3 ê³ ë„í™”
â”‚   â”‚   â”œâ”€â”€ EnhancedEconomicIndicators
â”‚   â”‚   â”‚   â”œâ”€â”€ get_enhanced_oil_data()
â”‚   â”‚   â”‚   â”œâ”€â”€ get_enhanced_exchange_data()
â”‚   â”‚   â”‚   â””â”€â”€ get_enhanced_interest_rate()
â”‚   â”‚   â”œâ”€â”€ RegionalDemandAnalyzer
â”‚   â”‚   â”‚   â””â”€â”€ analyze()          # ì§€ì—­ë³„ ìˆ˜ìš” ë¶„ì„
â”‚   â”‚   â””â”€â”€ TimingPredictor
â”‚   â”‚       â””â”€â”€ predict_timing()   # 14ì¼ ì˜ˆì¸¡
â”‚   â”‚
â”‚   â”œâ”€â”€ b2b_intelligence.py        # B2B ì¸ì‚¬ì´íŠ¸
â”‚   â”‚   â””â”€â”€ B2BMarketIntelligence
â”‚   â”‚       â”œâ”€â”€ get_market_opportunity_index()
â”‚   â”‚       â”œâ”€â”€ get_buying_signals()
â”‚   â”‚       â”œâ”€â”€ get_sell_signals()
â”‚   â”‚       â”œâ”€â”€ get_portfolio_roi()
â”‚   â”‚       â”œâ”€â”€ get_forecast_accuracy()
â”‚   â”‚       â”œâ”€â”€ get_sensitivity_analysis()
â”‚   â”‚       â””â”€â”€ get_api_analytics()
â”‚   â”‚
â”‚   â”œâ”€â”€ groq_service.py            # Groq AI ì—°ë™
â”‚   â”‚   â””â”€â”€ GroqService
â”‚   â”‚       â”œâ”€â”€ generate_signal()  # ë§¤ìˆ˜/ê´€ë§ ì‹ í˜¸
â”‚   â”‚       â”œâ”€â”€ detect_fraud()     # í—ˆìœ„ë§¤ë¬¼ íƒì§€
â”‚   â”‚       â””â”€â”€ generate_negotiation_script()
â”‚   â”‚
â”‚   â”œâ”€â”€ recommendation_service.py  # ì¶”ì²œ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ similar_service.py         # ìœ ì‚¬ ì°¨ëŸ‰
â”‚   â”œâ”€â”€ database_service.py        # SQLite
â”‚   â”œâ”€â”€ history_service.py         # ì´ë ¥ ê´€ë¦¬
â”‚   â””â”€â”€ admin_service.py           # ëŒ€ì‹œë³´ë“œ
â”‚
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ logger.py                  # ë¡œê¹…
â”‚   â””â”€â”€ data_collectors.py         # ì™¸ë¶€ ë°ì´í„° ìˆ˜ì§‘
â”‚
â””â”€â”€ __init__.py
```

### 2.2 API ì—”ë“œí¬ì¸íŠ¸ (ì‹¤ì œ)

```python
# run_server.pyì— ì •ì˜ëœ ì‹¤ì œ ì—”ë“œí¬ì¸íŠ¸

# === ê¸°ë³¸ ===
GET  /api/health                   # í—¬ìŠ¤ì²´í¬
GET  /api/health/detailed          # ìƒì„¸ í—¬ìŠ¤ì²´í¬

# === ê°€ê²© ì˜ˆì¸¡ ===
POST /api/predict                  # ë‹¨ìˆœ ì˜ˆì¸¡
POST /api/smart-analysis           # í†µí•© ë¶„ì„ (ê°€ê²©+íƒ€ì´ë°+AI)

# === íƒ€ì´ë° ===
POST /api/timing                   # ëª¨ë¸ë³„ íƒ€ì´ë°
GET  /api/market-timing            # ì‹œì¥ ì „ì²´ íƒ€ì´ë°

# === Phase 3 ê³ ë„í™” ===
GET  /api/economic-insights        # ê²½ì œ ì¸ì‚¬ì´íŠ¸
GET  /api/timing-prediction        # í–¥í›„ 2ì£¼ ì˜ˆì¸¡
GET  /api/regional-analysis        # ì§€ì—­ë³„ ìˆ˜ìš”

# === B2B ì¸ì‚¬ì´íŠ¸ ===
GET  /api/b2b/dashboard            # ì „ì²´ ëŒ€ì‹œë³´ë“œ
GET  /api/b2b/market-opportunity   # ì‹œì¥ ê¸°íšŒ ì§€ìˆ˜
GET  /api/b2b/buying-signals       # ë§¤ì§‘ ì¶”ì²œ
GET  /api/b2b/sell-signals         # ë§¤ê° ê²½ê³ 
GET  /api/b2b/sensitivity          # ë¯¼ê°ë„ ë¶„ì„
GET  /api/b2b/forecast-accuracy    # ì˜ˆì¸¡ ì •í™•ë„
GET  /api/b2b/api-analytics        # API ì‚¬ìš© í˜„í™©

# === ì¶”ì²œ/ìœ ì‚¬ ===
GET  /api/popular                  # ì¸ê¸° ëª¨ë¸
GET  /api/trending                 # íŠ¸ë Œë”©
GET  /api/recommendations          # ì¶”ì²œ ì°¨ëŸ‰
GET  /api/good-deals               # ê°€ì„±ë¹„ ì¢‹ì€ ì°¨ëŸ‰
POST /api/similar                  # ìœ ì‚¬ ì°¨ëŸ‰

# === ê´€ë¦¬ì ===
GET  /api/admin/stats              # ëŒ€ì‹œë³´ë“œ í†µê³„
GET  /api/admin/recent-analyses    # ìµœê·¼ ë¶„ì„
GET  /api/notifications            # ì•Œë¦¼
```

---

## 3. ë°ì´í„° íë¦„ ìƒì„¸

### 3.1 ê°€ê²© ì˜ˆì¸¡ íë¦„

```
[Client Request]
     â”‚
     â–¼
POST /api/smart-analysis
{
  "brand": "í˜„ëŒ€",
  "model": "ê·¸ëœì €",
  "year": 2022,
  "mileage": 35000,
  "fuel": "ê°€ì†”ë¦°"
}
     â”‚
     â–¼
[PredictionServiceV12.predict()]
     â”‚
     â”œâ”€â”€â”€ ë¸Œëœë“œ ì²´í¬ â”€â”€â”€â”¬â”€â”€â”€ êµ­ì‚°ì°¨ â†’ _predict_domestic()
     â”‚                   â”‚             â”‚
     â”‚                   â”‚             â”œâ”€â”€ ëª¨ë¸ ë¡œë“œ (domestic_unified_v12_gasoline.pkl)
     â”‚                   â”‚             â”œâ”€â”€ Feature ì¸ì½”ë”©
     â”‚                   â”‚             â”œâ”€â”€ XGBoost predict()
     â”‚                   â”‚             â””â”€â”€ ê°€ê²© + ì‹ ë¢°êµ¬ê°„ ë°˜í™˜
     â”‚                   â”‚
     â”‚                   â””â”€â”€â”€ ìˆ˜ì…ì°¨ â†’ _predict_imported()
     â”‚                                 â”‚
     â”‚                                 â””â”€â”€ (ë™ì¼ ë¡œì§)
     â”‚
     â–¼
[TimingService.analyze_timing()]
     â”‚
     â”œâ”€â”€ _analyze_macro()    â†’ ê¸ˆë¦¬/ìœ ê°€/í™˜ìœ¨ ì ìˆ˜
     â”œâ”€â”€ _analyze_trend()    â†’ ë„¤ì´ë²„ ê²€ìƒ‰íŠ¸ë Œë“œ ì ìˆ˜
     â””â”€â”€ _analyze_schedule() â†’ ì‹ ì°¨ì¶œì‹œ ì˜í–¥ ì ìˆ˜
     â”‚
     â–¼
[GroqService] (ì„ íƒì )
     â”‚
     â”œâ”€â”€ generate_signal()
     â””â”€â”€ generate_negotiation_script()
     â”‚
     â–¼
[Response]
{
  "prediction": {"predicted_price": 3200, "price_range": [2900, 3500]},
  "timing": {"timing_score": 65, "reasons": [...]},
  "groq_analysis": {"signal": "buy", "negotiation": "..."}
}
```

### 3.2 B2B ëŒ€ì‹œë³´ë“œ ë°ì´í„° íë¦„

```
[Admin Dashboard]
     â”‚
     â–¼
GET /api/b2b/dashboard
     â”‚
     â–¼
[B2BMarketIntelligence.get_full_dashboard_data()]
     â”‚
     â”œâ”€â”€ get_market_opportunity_index()
     â”‚   â”‚
     â”‚   â”œâ”€â”€ [EnhancedEconomicIndicators] (ì‹¤ì œ ë°ì´í„°)
     â”‚   â”‚   â”œâ”€â”€ Yahoo Finance â†’ ìœ ê°€, í™˜ìœ¨
     â”‚   â”‚   â””â”€â”€ ê³„ì ˆì„±/ìš”ì¼ ë³´ì •
     â”‚   â”‚
     â”‚   â””â”€â”€ ì ìˆ˜ ê³„ì‚° (30-95)
     â”‚
     â”œâ”€â”€ get_buying_signals() â†’ ì°¨ì¢…ë³„ ROI ê³„ì‚° (ì‹œë®¬ë ˆì´ì…˜)
     â”œâ”€â”€ get_sell_signals()   â†’ ìœ„í—˜ë„ ê³„ì‚° (ì‹œë®¬ë ˆì´ì…˜)
     â”œâ”€â”€ get_portfolio_roi()  â†’ í¬íŠ¸í´ë¦¬ì˜¤ ìˆ˜ìµë¥  (ì‹œë®¬ë ˆì´ì…˜)
     â”œâ”€â”€ get_forecast_accuracy() â†’ ì˜ˆì¸¡ ì •í™•ë„ (ì‹œë®¬ë ˆì´ì…˜)
     â”œâ”€â”€ get_sensitivity_analysis() â†’ ë¯¼ê°ë„ (ì •ì  ë°ì´í„°)
     â””â”€â”€ get_api_analytics()  â†’ API í†µê³„ (ì‹œë®¬ë ˆì´ì…˜)
     â”‚
     â–¼
[Response]
{
  "market_opportunity": {...},
  "buying_signals": [...],
  "sell_signals": [...],
  "data_sources": {
    "economic": "real",      // Yahoo Finance
    "database": "simulated", // ì‹œë®¬ë ˆì´ì…˜
    "vehicle_stats": "simulated"
  }
}
```

---

## 4. Docker êµ¬ì„±

### 4.1 docker-compose.yml (ì‹¤ì œ)

```yaml
services:
  ml-service:
    build:
      context: .
      dockerfile: docker/Dockerfile.ml
    ports:
      - "8000:8000"
    volumes:
      - ./models:/app/models
      - ./data:/app/data
    environment:
      - GROQ_API_KEY=${GROQ_API_KEY}
      - BOK_API_KEY=${BOK_API_KEY}
      - NAVER_CLIENT_ID=${NAVER_CLIENT_ID}
      - NAVER_CLIENT_SECRET=${NAVER_CLIENT_SECRET}

  admin-dashboard:
    build:
      context: ./admin-dashboard
      dockerfile: Dockerfile
    ports:
      - "3001:80"
    depends_on:
      - ml-service

  user-service:
    build:
      context: ./user-service
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=docker
```

### 4.2 ë„¤íŠ¸ì›Œí¬ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Docker Network: carsentix            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ml-service  â”‚  â”‚admin-dashboardâ”‚ â”‚user-svc â”‚ â”‚
â”‚  â”‚   :8000     â”‚  â”‚    :80       â”‚  â”‚  :8080  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                â”‚              â”‚       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                          â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    Host Network
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
   localhost:8000    localhost:3001    localhost:8080
```

---

## 5. ë³´ì•ˆ êµ¬ì„±

### 5.1 ì¸ì¦ íë¦„ (JWT)

```
[Login Request]
     â”‚
     â–¼
POST /auth/login
{username, password}
     â”‚
     â–¼
[User Service]
     â”‚
     â”œâ”€â”€ ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ (BCrypt)
     â”œâ”€â”€ JWT ìƒì„± (Access + Refresh)
     â””â”€â”€ ì‘ë‹µ
     â”‚
     â–¼
[Client]
Authorization: Bearer <access_token>
     â”‚
     â–¼
[JwtAuthFilter]
     â”‚
     â”œâ”€â”€ í† í° ê²€ì¦
     â”œâ”€â”€ ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ
     â””â”€â”€ SecurityContext ì„¤ì •
```

### 5.2 CORS ì„¤ì • (ì‹¤ì œ)

```python
# run_server.py
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # ê°œë°œ í™˜ê²½
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

---

## 6. ëª¨ë¸ íŒŒì¼ êµ¬ì¡° (ì‹¤ì œ)

```
models/
â”œâ”€â”€ domestic_unified_v12_gasoline.pkl      # êµ­ì‚° ê°€ì†”ë¦°
â”œâ”€â”€ domestic_unified_v12_diesel.pkl        # êµ­ì‚° ë””ì ¤
â”œâ”€â”€ domestic_unified_v12_lpg.pkl           # êµ­ì‚° LPG
â”œâ”€â”€ domestic_unified_v12_hybrid.pkl        # êµ­ì‚° í•˜ì´ë¸Œë¦¬ë“œ
â”œâ”€â”€ domestic_unified_v12_ev.pkl            # êµ­ì‚° ì „ê¸°
â”œâ”€â”€ domestic_unified_v12_encoders.pkl      # ì¸ì½”ë”
â”œâ”€â”€ domestic_unified_v12_features.pkl      # Feature ëª©ë¡
â”‚
â”œâ”€â”€ imported_unified_v14_gasoline.pkl      # ìˆ˜ì… ê°€ì†”ë¦°
â”œâ”€â”€ imported_unified_v14_diesel.pkl        # ìˆ˜ì… ë””ì ¤
â”œâ”€â”€ imported_unified_v14_hybrid.pkl        # ìˆ˜ì… í•˜ì´ë¸Œë¦¬ë“œ
â”œâ”€â”€ imported_unified_v14_ev.pkl            # ìˆ˜ì… ì „ê¸°
â”œâ”€â”€ imported_unified_v14_encoders.pkl
â””â”€â”€ imported_unified_v14_features.pkl
```

---

## 7. ì™¸ë¶€ API ì—°ë™ ìƒì„¸

### 7.1 Yahoo Finance (yfinance)

```python
# ì‹¤ì œ ì‚¬ìš© ì½”ë“œ (enhanced_timing.py)
import yfinance as yf

# ìœ ê°€
oil = yf.Ticker("CL=F")  # WTI Crude Oil
oil_history = oil.history(period="60d")

# í™˜ìœ¨
krw = yf.Ticker("KRW=X")  # USD/KRW
exchange_history = krw.history(period="60d")
```

### 7.2 ë„¤ì´ë²„ DataLab

```python
# ì‹¤ì œ ì‚¬ìš© ì½”ë“œ (data_collectors.py)
import requests

url = "https://openapi.naver.com/v1/datalab/search"
headers = {
    "X-Naver-Client-Id": NAVER_CLIENT_ID,
    "X-Naver-Client-Secret": NAVER_CLIENT_SECRET
}
body = {
    "startDate": "2024-11-01",
    "endDate": "2024-12-01",
    "timeUnit": "date",
    "keywordGroups": [{"groupName": "ê·¸ëœì €", "keywords": ["ê·¸ëœì € ì¤‘ê³ "]}]
}
response = requests.post(url, headers=headers, json=body)
```

### 7.3 Groq AI

```python
# ì‹¤ì œ ì‚¬ìš© ì½”ë“œ (groq_service.py)
from groq import Groq

client = Groq(api_key=GROQ_API_KEY)
response = client.chat.completions.create(
    model="llama3-70b-8192",
    messages=[{"role": "user", "content": prompt}]
)
```

---

## 8. ì„±ëŠ¥ ì§€í‘œ (ì‹¤ì œ ì¸¡ì •ê°’)

| í•­ëª© | ìˆ˜ì¹˜ | ì¸¡ì • ì¡°ê±´ |
|------|------|----------|
| ê°€ê²© ì˜ˆì¸¡ ì‘ë‹µ ì‹œê°„ | ~100ms | ë‹¨ì¼ ìš”ì²­ |
| íƒ€ì´ë° ë¶„ì„ ì‘ë‹µ ì‹œê°„ | ~500ms | API í˜¸ì¶œ í¬í•¨ |
| B2B ëŒ€ì‹œë³´ë“œ ë¡œë”© | ~800ms | ì „ì²´ ë°ì´í„° |
| ëª¨ë¸ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ | ~200MB | ì „ì²´ ëª¨ë¸ ë¡œë“œ |
| Docker ì´ë¯¸ì§€ í¬ê¸° | ~1.2GB | ml-service |

---

*ì´ ë¬¸ì„œëŠ” ì‹¤ì œ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*
